<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Street.NET</title>
  <style>
    :root {
      --default-zone-logo-size: clamp(30px, 5vw, 40px);
      --default-info-box-logo-size: clamp(30px, 10vw, 40px);
    }

    body {
      margin: 0;
      background: #000;
      font-family: Arial, sans-serif;
      color: white;
      overflow-x: hidden;
    }

    .map-container {
      position: relative;
      min-height: 100vh;
      width: 100%;
      overflow-x: hidden;
    }

    .background-overlay {
      position: fixed;
      inset: 0;
      background: url('https://i.imgur.com/ne9vTRM.png') no-repeat center center;
      background-size: cover;
      opacity: 0.80;
      z-index: 0;
      pointer-events: none;
      width: 100vw;
      height: 100vh;
    }

    .topbar {
      position: sticky;
      top: 0;
      width: 100%;
      height: clamp(40px, 10vw, 50px);
      background: rgba(0, 0, 0, 0.6);
      color: #00ffcc;
      font-size: clamp(12px, 3vw, 16px);
      padding: clamp(8px, 2vw, 12px) clamp(10px, 3vw, 20px);
      font-weight: bold;
      letter-spacing: 1px;
      z-index: 10;
      display: flex;
      align-items: center;
    }

    .topbar .purple { color: #800080; }
    .topbar .green { color: #00ff00; }

    .map-frame {
      position: relative;
      width: min(90vw, 1200px);
      margin: clamp(20px, 5vw, 60px) auto;
      border: 2px solid rgba(0, 255, 200, 0.3);
      box-shadow: 0 0 20px rgba(0, 255, 200, 0.1);
      border-radius: 20px;
      background: #111;
      overflow: hidden;
      z-index: 2;
      aspect-ratio: 1 / 1;
    }

    .map-frame img {
      width: 100%;
      height: 100%;
      display: block;
      object-fit: contain;
    }

    .zone {
      position: absolute;
      cursor: pointer;
      transition: transform 0.2s;
      z-index: 5;
      width: var(--zone-logo-size, var(--default-zone-logo-size));
      height: var(--zone-logo-size, var(--default-zone-logo-size));
    }

    .zone img {
      width: 100%;
      height: 100%;
      border-radius: 10px;
      transition: all 0.3s ease;
      animation: pulse 2s infinite ease-in-out;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.15); }
      100% { transform: scale(1); }
    }

    .zone:hover img {
      transform: scale(1.2);
      box-shadow: 0 0 8px #00ffcc80;
      animation-play-state: paused;
    }

    #info-box {
      position: fixed;
      top: 50%;
      right: clamp(10px, 3vw, 20px);
      transform: translateY(-50%);
      width: min(70vw, 250px);
      background: #0f1f1d;
      border: 2px solid #1b3d39;
      padding: clamp(6px, 1.5vw, 8px);
      display: none;
      border-radius: 12px;
      z-index: 20;
      box-shadow: 0 0 15px #00ffcc99;
    }

    #info-box.active {
      display: block;
      animation: scaleFadeIn 0.5s ease-out forwards, neon-border 1.5s infinite ease-in-out;
    }

    @keyframes neon-border {
      0% { box-shadow: 0 0 5px #800080, 0 0 10px #800080, 0 0 15px #00ff00; }
      50% { box-shadow: 0 0 15px #00ff00, 0 0 20px #800080, 0 0 25px #00ff00; }
      100% { box-shadow: 0 0 5px #800080, 0 0 10px #800080, 0 0 15px #00ff00; }
    }

    @keyframes scaleFadeIn {
      from { opacity: 0; transform: translateY(-50%) scale(0.7); }
      to   { opacity: 1; transform: translateY(-50%) scale(1); }
    }

    #info-box .header { display: flex; align-items: center; gap: 10px; }
    #info-box .logo { width: var(--info-box-logo-size, var(--default-info-box-logo-size)); height: auto; }
    #info-box .title { flex-grow: 1; text-align: center; }
    #info-box .title h2 { margin: 0; color: #fff200; }

    .audio-controls { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); }
    .audio-controls button { background: rgba(0,0,0,0.6); border: 2px solid #1b3d39; color: #00ffcc; border-radius: 10px; padding: 6px 14px; cursor: pointer; }
  </style>
</head>
<body>
  <div class="map-container">
    <div class="background-overlay"></div>
    <div class="topbar">
      <h2>Welcome to <span class="purple">Street</span>.<span class="green">NET</span></h2>
    </div>

    <!-- Main Map Frame -->
    <div class="map-frame">
      <img id="main-map" src="https://i.imgur.com/OwTml66.jpeg" alt="Main Map" loading="lazy" />

      <!-- Zones -->
      <div class="zone" onclick="showInfo(1)" style="top:27%; left:12%;"><img src="https://i.imgur.com/HQI3RaD.png" alt="Zone 1"></div>
      <div class="zone" onclick="showInfo(2)" style="top:35%; left:3%;"><img src="https://i.imgur.com/9fH0B1B.png" alt="Zone 2"></div>
      <div class="zone" onclick="showInfo(3)" style="top:43%; left:2%;"><img src="https://i.imgur.com/pHvVSP3.png" alt="Zone 3"></div>
      <div class="zone" onclick="showInfo(4)" style="top:50%; left:13%;"><img src="https://i.imgur.com/jjbdKi7.png" alt="Zone 4"></div>
      <div class="zone" onclick="showInfo(5)" style="top:64%; left:25%;"><img src="https://i.imgur.com/9cjhVvj.png" alt="Zone 5"></div>
      <div class="zone" onclick="showInfo(6)" style="top:3%; left:83%;"><img src="https://i.imgur.com/9cjhVvj.png" alt="Zone 6"></div>
      <div class="zone" onclick="showInfo(7)" style="top:8%; left:75%;"><img src="https://i.imgur.com/9fH0B1B.png" alt="Zone 7"></div>
      <div class="zone" onclick="showInfo(8)" style="top:15%; left:79%;"><img src="https://i.imgur.com/9cjhVvj.png" alt="Zone 8"></div>
      <div class="zone" onclick="showInfo(9)" style="top:21%; left:88%;"><img src="https://i.imgur.com/7v4YQro.png" alt="Zone 9"></div>
      <div class="zone" onclick="showInfo(10)" style="top:47%; left:42%;"><img src="https://i.imgur.com/9fH0B1B.png" alt="Zone 10"></div>
      <div class="zone" onclick="showInfo(11)" style="top:86%; left:76%;"><img src="https://i.imgur.com/9cjhVvj.png" alt="Zone 11"></div>
    </div>

    <!-- Info Box -->
    <div id="info-box">
      <div class="header">
        <img id="info-logo" class="logo" src="" alt="Club Logo" />
        <div class="title"><p>Controlled By</p><h2 id="info-club">CLUB</h2></div>
      </div>
      <div class="track-map"><img id="info-track-map" src="" alt="Track Map" /></div>
      <div class="track-name" id="info-track-name">Track Name</div>
      <div class="track-details">
        <div><span>Length</span><strong id="info-length">-</strong></div>
        <div><span>Rounds</span><strong id="info-laps">-</strong></div>
        <div><span>Record</span><strong id="info-record">-</strong></div>
        <div><span>Cash</span><strong id="info-cash">-</strong></div>
      </div>
    </div>

    <!-- Music -->
    <div class="audio-controls"><button id="playPauseBtn">Play Music</button></div>
    <audio id="backgroundMusic" loop>
      <source src="https://audio.jukehost.co.uk/CjOyNg0OCnmMTMHWFDejx1GsrcCmamfM" type="audio/mpeg" />
    </audio>
  </div>

  <script>
    const zoneData = {
      1: { club: "Nocturne Performance", logo: "https://i.imgur.com/HQI3RaD.png", track: "https://i.imgur.com/cEKMybS.png", name: "Downtown", length: "5 Miles", laps: "3", record: "01:31:41", cash: "$15.000" },
      2: { club: "Invicible Midnight Racer", logo: "https://i.imgur.com/9fH0B1B.png", track: "https://i.imgur.com/a4toW9I.png", name: "Juniper Hill", length: "5,2 Miles", laps: "6", record: "02:09:03", cash: "$15.000" },
      3: { club: "Rising Sun", logo: "https://i.imgur.com/pHvVSP3.png", track: "https://i.imgur.com/hlErEUV.png", name: "Ocean Flat", length: "2,3 Miles", laps: "6", record: "00:58:48", cash: "$10.000" },
      4: { club: "SpeedCreed", logo: "https://i.imgur.com/jjbdKi7.png", track: "https://i.imgur.com/lR0BjGY.png", name: "Easter Bay", length: "3,5 Miles", laps: "3", record: "01:03:80", cash: "$15.000" },
      5: { club: "Redline Speedster", logo: "https://i.imgur.com/9cjhVvj.png", track: "https://i.imgur.com/rAKyRxG.png", name: "Foster Valley", length: "6,4", laps: "3", record: "03:02:93", cash: "$12.000" },
      6: { club: "Redline Speedster", logo: "https://i.imgur.com/0I3Al0v.png", track: "https://i.imgur.com/2aZpTcF.png", name: "Emerald Isle", length: "2,2 Miles", laps: "5", record: "00:51:74", cash: "$8.000" },
      7: { club: "Invicible Midnight Racer", logo: "https://i.imgur.com/9fH0B1B.png", track: "https://i.imgur.com/2MG6n6Y.png", name: "Red Sands", length: "2,6 Miles", laps: "5", record: "01:09:63", cash: "$8.000" },
      8: { club: "Redline Speedster", logo: "https://i.imgur.com/9cjhVvj.png", track: "https://i.imgur.com/PeHliUG.png", name: "Old Venturas Strip", length: "5,8 Miles", laps: "6", record: "03:32:80", cash: "$20.000" },
      9: { club: "SpeedCreed", logo: "https://i.imgur.com/7v4YQro.png", track: "https://i.imgur.com/4I5LTgq.png", name: "Linden Station", length: "4 Miles", laps: "5", record: "1:16:01", cash: "$10.000" },
      10:{ club: "Invicible Midnight Racer", logo: "https://i.imgur.com/9fH0B1B.png", track: "https://i.imgur.com/YZA4Zr5.png", name: "Blueberry", length: "4,8 Miles", laps: "3", record: "01:37:24", cash: "$12.000" },
      11:{ club: "Redline Speedster", logo: "https://i.imgur.com/9cjhVvj.png", track: "https://i.imgur.com/TtBeB6K.png", name: "Ocean Docks", length: "5,2 Miles", laps: "5", record: "01:50:11", cash: "$10.000" }
    };

    function showInfo(id) {
      const info = zoneData[id];
      if (!info) return;
      document.getElementById('info-logo').src = info.logo;
      document.getElementById('info-club').textContent = info.club;
      document.getElementById('info-track-map').src = info.track;
      document.getElementById('info-track-name').textContent = info.name;
      document.getElementById('info-length').textContent = info.length;
      document.getElementById('info-laps').textContent = info.laps;
      document.getElementById('info-record').textContent = info.record;
      document.getElementById('info-cash').textContent = info.cash;
      document.getElementById('info-box').classList.add('active');
    }

    document.addEventListener('click', e => {
      const box = document.getElementById('info-box');
      const zone = e.target.closest('.zone');
      if (!box.contains(e.target) && !zone) box.classList.remove('active');
    });

    // Music
    const audio = document.getElementById('backgroundMusic');
    document.getElementById('playPauseBtn').onclick = () => {
      if (audio.paused) { audio.play(); playPauseBtn.textContent = "Pause Music"; }
      else { audio.pause(); playPauseBtn.textContent = "Play Music"; }
    };

    // === Integrasi Google Sheets ===
    const SHEET_API = "https://api.sheetbest.com/sheets/d7276630-2475-4dbe-82c4-328e0dd9fb19";

    fetch(SHEET_API)
      .then(res => res.json())
      .then(data => {
        data.forEach(row => {
          const zoneId = parseInt(row.Zone.match(/\d+/));
          if (!zoneId) return;

          zoneData[zoneId] = {
            club: row.Owner || zoneData[zoneId]?.club,
            logo: row.LogoMap || zoneData[zoneId]?.logo,
            track: row.MainMap || zoneData[zoneId]?.track,
            name: row.TrackName || zoneData[zoneId]?.name,
            length: row.Length || zoneData[zoneId]?.length,
            laps: row.Rounds || zoneData[zoneId]?.laps,
            record: row.Record || zoneData[zoneId]?.record,
            cash: row.Cash || zoneData[zoneId]?.cash,
          };

          // update logo di map
          const el = document.querySelector(`.zone[onclick="showInfo(${zoneId})"] img`);
          if (el && row.LogoMap) el.src = row.LogoMap;

          // update main map jika ada
          if (row.MainMap) document.getElementById("main-map").src = row.MainMap;
        });
      })
      .catch(err => console.error("Gagal fetch data:", err));
  </script>
</body>
</html>
